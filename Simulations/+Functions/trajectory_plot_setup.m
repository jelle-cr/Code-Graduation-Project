function legendHandle = trajectory_plot_setup(rangeX, rangeY, x_0, x_d, x_o, N_a, r_o, N_o, quality)

    p_0 = x_0(1:2,:);
    p_d = x_d(1:2);
    p_o = x_o(1:2,:);

    %% Setup plot
    if strcmp(quality, 'SD')
        figure('Position', [100 50 1000 500]);  %Left Bottom Width Height
        fontMul = 1;
    end
    if strcmp(quality, 'HD')
        figure('Position', [100, 100, 1920, 1080]);
        fontMul = 1.75;
    end
    hold on; grid on; axis equal; 
    ax = gca; set(ax, 'FontSize', fontMul*22); ax.TickLabelInterpreter = 'latex';
    xlim(rangeX); ylim(rangeY);
    xticks(rangeX(1):1:rangeX(2)); yticks(rangeY(1):1:rangeY(2));
    xlabel('$x_1$ [m]', 'Interpreter','latex', 'FontSize', fontMul*30);
    ylabel('$x_2$ [m]', 'Interpreter','latex', 'FontSize', fontMul*30);

    %% Static plotting
    % Plot obstacles
    load('+Functions\customColors.mat');
    grey = DesmosColors(6,:);
    th = 0:pi/50:2*pi;
    for j = 1:N_o
        x_obs = r_o * cos(th) + p_o(1,j);
        y_obs = r_o * sin(th) + p_o(2,j);
        patch(x_obs, y_obs, grey,'FaceColor', grey, ...
                            'FaceAlpha', 1,...
                            'EdgeColor', 'black', ...
                            'HandleVisibility', 'off');
        text(p_o(1,j)-0.2*r_o, p_o(2,j)-0.027*r_o, sprintf('%d', j), ...
                                         'Color', 'white', ...
                                         'Interpreter','latex', ...
                                         'FontSize', fontMul*25);
    end

    % Plot initial positions
    for i = 1:N_a
        plot(p_0(1,i), p_0(2,i), 'o','MarkerSize', fontMul*20, ...
                                                       'MarkerEdgeColor', 'blue', ...
                                                       'LineWidth', fontMul*4,...
                                                       'HandleVisibility', 'off');
    end 

    % Plot desired position
    plot(p_d(1), p_d(2), 'x','MarkerSize', fontMul*30, ...
                             'MarkerEdgeColor', 'red', ...
                             'LineWidth', fontMul*6,...
                             'HandleVisibility', 'off');

    %% Create legend entries
    % Create initial positions in legend
    initialPositionHandle  = plot(NaN, NaN, 'o', 'MarkerSize', fontMul*15, ...
                        'MarkerEdgeColor', 'blue', ...
                        'LineWidth', fontMul*4, ...
                        'DisplayName', 'Initial Position');
    % Create goal in legend
    desiredPositionHandle  = plot(NaN, NaN, 'x', 'MarkerSize', fontMul*20, ...
                        'MarkerEdgeColor', 'red', ...
                        'LineWidth', fontMul*4,...
                        'DisplayName', 'Desired Position');
    % Create obstacle in legend
    obstacleHandle  = plot(NaN, NaN, 'o', 'MarkerEdgeColor', 'black', ...
                        'MarkerFaceColor', grey, ...
                        'MarkerSize', fontMul*15, ...
                        'DisplayName', 'Obstacles');
    trajectories = [];
    legendHandle = legend([initialPositionHandle, desiredPositionHandle, obstacleHandle, trajectories], ...
                           'Location', 'northeastoutside', ...
                           'Interpreter', 'latex', ...
                           'FontSize', fontMul*26,...
                           'BackgroundAlpha',0.6);
end